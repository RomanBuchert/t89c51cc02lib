/**************************************************************************//**
 * @file sysCfg.c
 * @brief Hier werden die Hardwareeigenschaften des Systems definiert
 * @author Roman Buchert (roman.buchert@googlemail.com)
 *****************************************************************************/
/*****************************************************************************/

/*****************************************************************************
 * INCLUDE-Dateien
 *****************************************************************************/
#include <sysCfg.h>
/*****************************************************************************/

/******************************************************************************
 * Fileglobale Variablen
 *****************************************************************************/
__u32 u32QuarzFreq;         ///< Fileglobale Variable in der die Quarzfreqzenz gespeichert wird
/*****************************************************************************/

/**************************************************************************//**
 * @brief Erste Funktion die aufgerufen werden muss.
 * Hier wird die Quarzfreqzenz und der X2-Modus angegeben. Der X2-Modus wird
 * nur aktiviert, wenn die Frequenz innerhalb des zul채ssigen Bereiches ist.
 * @param u32LQuarzFreq Frequenz des Quarzes in Hertz
 * @param eSysClockMode Gibt den X-Modus des Prozessors an @see ESysClockMode
 *****************************************************************************/
void SysInit(__u32 u32LQuarzFreq, TSysClockMode eSysClockMode)
{
	// Check ob die Frequenz f체r den X2-Modus zu hoch ist.
	if (u32LQuarzFreq > MAX_CLOCK_X2)
    {
        eSysClockMode = X2_OFF;
    }

    //X2-Modus einstellen
    CKCON &= ~0x01;
    CKCON |= (eSysClockMode & 0x01);
    u32QuarzFreq = u32LQuarzFreq;
}
/*****************************************************************************/

/**************************************************************************//**
 * @brief Gibt die eingestellte Quarzfrequenz zur체ck
 * @return Die Quarzfrequenz in Hertz
 *****************************************************************************/
__u32 SysGetQuarzFreq(void)
{
    return u32QuarzFreq;
}
/*****************************************************************************/

/**************************************************************************//**
 * @brief Gibt den X-Modus zur체ck
 * @return  Das eingestellte Bit0 im Register CKCON \n
 *          0: X2-Modus aus (12 Zyklen pro Takt) \n
 *          1: X2-Modus ein (6 Zyklen pro Takt)
 *****************************************************************************/
__u8 SysGetX2Mode(void)
{
    return (CKCON & 0x01);
}
/*****************************************************************************/

/**************************************************************************//**
 *
 *****************************************************************************/
/*****************************************************************************/

/**************************************************************************//**
 *
 *****************************************************************************/
/*****************************************************************************/

/**************************************************************************//**
 *
 *****************************************************************************/
/*****************************************************************************/

